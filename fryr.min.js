!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.Fryr=e(t)}(window,function(t){"use strict";function e(e,r){var n=t.location.hash,o=new RegExp("("+e+"=.*)("+r+",?)"),a=n.match(o);n=n.replace(a[0],a[1]),n=n.replace(/,&/g,"&"),n=n.replace(/,$/,""),n=n.replace(/=\,/g,"="),t.location.hash=n}function r(e,r,n){var a,i=t.location.hash,c=o(e);"&"===c.charAt(0)||""===c?(c=e+"=",a=c+r):(c=e+"="+c,a=n?e+"="+r:c+","+r),i=i.replace(c,a),t.location.hash=i}function n(e){var r=t.location.hash,n=new RegExp("[?&]"+e+"=","g");r=r.replace(n,""),r=r.replace("#&","#?"),t.location.hash=r}function o(e){if(!t.location.hash)return"";var r=t.location.hash,n=new RegExp("#.*[?&]"+e+"=([^&]+)(&|$)"),o=r.match(n);return o?o[1]:""}function a(t,e){return"undefined"==typeof t?e:t}function i(a,i,c,s){var h=t.location.hash;if(-1!==h.indexOf(a)){var p=o(a),u=new RegExp(i,"g");u.test(p)?c?r(a,i,s):(""===i?e(a,p):e(a,i),""===o(a)&&n(a)):r(a,i,s)}else t.location.hash?t.location.hash+="&"+a+"="+i:t.location.hash="?"+a+"="+i}function c(e,r,n){function o(){var t=i.parse();e(t)}var i=this;return r=a(r,{}),n=a(n,!0),this.params={},t.addEventListener("hashchange",o),Object.keys(r).length?this.merge(r,!0):n&&o(),this}return c.prototype.update=function(t,e,r){r=a(r,!1),i(t,e,r,!0)},c.prototype.append=function(t,e){i(t,e,!1,!1)},c.prototype.parse=function(){var e,r=t.location.hash;if(this.params={},t.location.hash&&/\?/g.test(r)){e=r.split("?")[1],e=e.split("&");for(var n=0;n<e.length;n++){var o=e[n].split("="),a=o[0],i=o[1];this.params[a]=i}}return this.params},c.prototype.convert=function(t){if(t.constructor===String&&(t=JSON.parse(t)),t.constructor!==Object)return!1;for(var e=Object.keys(t),r="?",n=0;n<e.length;n++){var o=e[n],a=t[o];a.constructor===Array&&(a=a.join(",")),"?"!==r&&(r+="&"),r+=o+"="+a}return r},c.prototype.merge=function(e,r){if(r=a(r,!1),e.constructor===String&&(e=JSON.parse(e)),!r)for(var n=this.parse(),o=Object.keys(n),i=0;i<o.length;i++){var c=o[i],s=n[c];e.hasOwnProperty(c)||(e[c]=s)}var h=this.convert(e);return t.location.hash="#"+h,h},c.prototype.param=function(t){return o(t)},c.prototype.paramPresent=function(t){var e=this.params[t];return"undefined"!=typeof e&&""!==e},c});